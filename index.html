<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prism Insight - AI Report</title>
    <style>
        :root {
            --bg-color: #0b0e14;
            --card-bg: #161b22;
            --text-main: #ffffff;
            --text-sub: #8b949e;
            --accent-hot: #f85149;
            --accent-cool: #58a6ff;
            --border-color: #30363d;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg-color); color: var(--text-main);
            margin: 0; padding: 15px; line-height: 1.5;
        }

        .container { max-width: 480px; margin: 0 auto; }
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid var(--border-color); padding-bottom: 10px; }
        .logo { font-size: 20px; font-weight: 800; color: #58a6ff; }
        .date { font-size: 11px; color: var(--text-sub); }

        .section-title { font-size: 16px; font-weight: 700; margin: 25px 0 12px 0; color: #c9d1d9; border-left: 4px solid #58a6ff; padding-left: 10px; }

        /* Market Cards */
        .market-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .market-card { background: var(--card-bg); padding: 12px; border-radius: 12px; border: 1px solid var(--border-color); }
        .m-name { font-size: 11px; color: var(--text-sub); }
        .m-price { font-size: 16px; font-weight: 700; }
        .up { color: var(--accent-hot); } .down { color: var(--accent-cool); }

        /* Sectors & News */
        .sectors-container, .news-list { display: flex; flex-direction: column; gap: 10px; }
        .sector-card, .news-item { background: var(--card-bg); padding: 12px; border-radius: 10px; border: 1px solid var(--border-color); }
        .sector-card.HOT { border-left: 4px solid var(--accent-hot); }
        .sector-card.COOL { border-left: 4px solid var(--accent-cool); }
        
        .news-item { text-decoration: none; color: inherit; font-size: 13px; display: block; }
        .news-title { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; display: block; }

        /* Summary & Picks */
        .summary-box { background: rgba(88, 166, 255, 0.05); padding: 15px; border-radius: 12px; border: 1px dashed #30363d; font-size: 13.5px; }
        .pick-list { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
        .pick-item { background: #21262d; padding: 10px; border-radius: 8px; text-align: center; border: 1px solid #30363d; font-size: 12px; font-weight: 600; }

        /* Hit Rate */
        .hit-rate-box { text-align: center; padding: 20px; background: var(--card-bg); border-radius: 15px; margin-bottom: 30px; border: 1px solid var(--border-color); }
        .hit-value { font-size: 36px; font-weight: 900; color: var(--accent-hot); }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">PRISM INSIGHT üíé</div>
            <div id="report-date" class="date">Loading...</div>
        </header>

        <div id="market-indices" class="market-grid"></div>

        <div class="section-title">ÏãúÏû• ÏöîÏïΩ</div>
        <div id="summary" class="summary-box"></div>

        <div class="section-title">Ï£ºÏöî ÏÑπÌÑ∞ ÌòÑÌô©</div>
        <div id="sectors-list" class="sectors-container"></div>

        <div class="section-title">Í∏ÄÎ°úÎ≤å Ï£ºÏöî Îâ¥Ïä§</div>
        <div id="news-list" class="news-list"></div>

        <div class="section-title">Ïò§ÎäòÏùò AI Ï∂îÏ≤ú Ï¢ÖÎ™©</div>
        <div id="picks-list" class="pick-list"></div>

        <div class="section-title">Ï†ÑÏùº Ï∂îÏ≤ú ÏàòÏùµÎ•†</div>
        <div id="past-results" class="pick-list"></div>

        <div class="section-title">ÎàÑÏ†Å ÏÉÅÏäπ Ï†ÅÏ§ëÎ•†</div>
        <div class="hit-rate-box">
            <div id="hit-rate-value" class="hit-value">0%</div>
            <div style="font-size: 11px; color: var(--text-sub);">ÏµúÍ∑º 30Ïùº Îç∞Ïù¥ÌÑ∞ Î∂ÑÏÑù Í∏∞Ï§Ä</div>
        </div>
    </div>

    <script>
        async function updateUI() {
            try {
                const [res, hRes] = await Promise.all([fetch('recommendations.json'), fetch('history.json')]);
                const data = await res.json();
                const history = await hRes.json();

                document.getElementById('report-date').innerText = data.date;
                document.getElementById('summary').innerText = data.summary;

                // ÏßÄÏàò Î†åÎçîÎßÅ
                document.getElementById('market-indices').innerHTML = Object.entries(data.market_info).map(([k, v]) => `
                    <div class="market-card">
                        <div class="m-name">${v.status} ${k}</div>
                        <div class="m-price">${v.price.toLocaleString()}</div>
                        <div class="m-change ${v.change >= 0 ? 'up' : 'down'}">${v.change >= 0 ? '‚ñ≤' : '‚ñº'} ${Math.abs(v.change)}%</div>
                    </div>
                `).join('');

                // ÏÑπÌÑ∞ Î†åÎçîÎßÅ
                document.getElementById('sectors-list').innerHTML = data.sectors.map(s => `
                    <div class="sector-card ${s.sentiment}">
                        <div style="display:flex; justify-content:space-between; font-size:13px; font-weight:bold; margin-bottom:5px;">
                            <span>${s.name}</span><span style="color:${s.sentiment==='HOT'?'#f85149':'#58a6ff'}">${s.sentiment}</span>
                        </div>
                        <div style="font-size:11px; color:#8b949e;">${s.reason}</div>
                    </div>
                `).join('');

                // Îâ¥Ïä§ Î†åÎçîÎßÅ (Î≥µÍµ¨!)
                document.getElementById('news-list').innerHTML = data.news_headlines.map(n => `
                    <a href="${n.link}" class="news-item" target="_blank">
                        <span class="news-title">üì∞ ${n.title}</span>
                    </a>
                `).join('');

                // Ï¢ÖÎ™© Î∞è Í≥ºÍ±∞ ÏàòÏùµÎ•†
                document.getElementById('picks-list').innerHTML = data.tickers.map(t => `<div class="pick-item">${t}</div>`).join('');
                document.getElementById('past-results').innerHTML = data.past_results.map(r => `
                    <div class="pick-item">
                        <div>${r.ticker}</div>
                        <div class="${r.change >= 0 ? 'up' : 'down'}" style="font-size:10px;">${r.change}%</div>
                    </div>
                `).join('');

                // Ï†ÅÏ§ëÎ•† Í≥ÑÏÇ∞
                let total = 0, hits = 0;
                history.forEach(day => day.performance.forEach(p => { total++; if(p.change > 0) hits++; }));
                document.getElementById('hit-rate-value').innerText = (total > 0 ? (hits/total*100).toFixed(1) : 0) + "%";

            } catch (err) { console.error(err); }
        }
        updateUI();
    </script>
</body>
</html>
