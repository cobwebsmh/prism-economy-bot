<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prism Insight Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white min-h-screen p-5">
    <div class="max-w-4xl mx-auto">
        <header class="mb-10 text-center">
            <h1 class="text-4xl font-bold text-blue-400 mb-2">ğŸ’ Prism Insight</h1>
            <p id="update-time" class="text-gray-400">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
        </header>

        <div id="indices-container" class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-10"></div>

        <section class="bg-gray-800 p-6 rounded-xl mb-10 shadow-lg border-l-4 border-blue-500">
            <h2 class="text-xl font-semibold mb-4 text-blue-300">ì˜¤ëŠ˜ì˜ ì‹œì¥ ìš”ì•½</h2>
            <p id="market-summary" class="text-lg leading-relaxed text-gray-200">AI ë¶„ì„ ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤...</p>
        </section>

        <section class="mb-10">
            <h2 class="text-xl font-semibold mb-4 text-blue-300">AI ì¶”ì²œ í‹°ì»¤</h2>
            <div id="ticker-container" class="flex flex-wrap gap-3"></div>
        </section>
    </div>

    <script>
        async function loadData() {
            try {
                // ë¸Œë¼ìš°ì € ìºì‹œ ë°©ì§€ë¥¼ ìœ„í•´ ëœë¤ ì¿¼ë¦¬ ì¶”ê°€
                const response = await fetch('recommendations.json?t=' + new Date().getTime());
                if (!response.ok) throw new Error('ë°ì´í„° íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                
                const data = await response.json();
                
                // 1. ì—…ë°ì´íŠ¸ ì‹œê°„
                document.getElementById('update-time').innerText = `ìµœê·¼ ì—…ë°ì´íŠ¸: ${data.date || 'ì•Œ ìˆ˜ ì—†ìŒ'}`;

                // 2. ì§€ìˆ˜ ë Œë”ë§
                const indicesHtml = data.indices.map(item => `
                    <div class="bg-gray-800 p-4 rounded-lg text-center">
                        <div class="text-sm text-gray-400">${item.name}</div>
                        <div class="text-xl font-bold ${item.change >= 0 ? 'text-red-400' : 'text-blue-400'}">
                            ${item.change >= 0 ? 'â–²' : 'â–¼'} ${Math.abs(item.change)}%
                        </div>
                    </div>
                `).join('');
                document.getElementById('indices-container').innerHTML = indicesHtml;

                // 3. ìš”ì•½ ë Œë”ë§
                document.getElementById('market-summary').innerText = data.summary || "ìš”ì•½ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";

                // 4. í‹°ì»¤ ë Œë”ë§
                const tickerHtml = data.tickers.map(ticker => `
                    <span class="bg-blue-900 text-blue-200 px-4 py-2 rounded-full font-mono font-bold border border-blue-700">
                        ${ticker}
                    </span>
                `).join('');
                document.getElementById('ticker-container').innerHTML = tickerHtml || '<p class="text-gray-500">ì¶”ì²œëœ í‹°ì»¤ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';

            } catch (error) {
                console.error('Error:', error);
                document.getElementById('market-summary').innerHTML = `<span class="text-red-400">ì˜¤ë¥˜: ${error.message}<br>GitHub Actionsê°€ ì™„ë£Œëœ í›„ 1~2ë¶„ ë’¤ì— ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.</span>`;
            }
        }

        loadData();
    </script>
</body>
</html>
