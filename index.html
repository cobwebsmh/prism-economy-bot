<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prism Insight Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="manifest" href="manifest.json">
    <script>
        if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js'); }
    </script>
    <style>
        body { background-color: #0f172a; color: white; font-family: 'Inter', sans-serif; }
        .card { background: #1e293b; border-radius: 1rem; padding: 1.5rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-4xl mx-auto space-y-6">
        <header class="flex justify-between items-center border-b border-gray-700 pb-4">
            <h1 class="text-3xl font-bold text-blue-400">ğŸ’ Prism Insight</h1>
            <span id="update-date" class="text-sm text-gray-400">ë¡œë”© ì¤‘...</span>
        </header>

        <div id="market-grid" class="grid grid-cols-2 md:grid-cols-4 gap-4">
            </div>

        <section class="card border-l-4 border-blue-500">
            <h2 class="text-xl font-bold mb-2 text-blue-300">ğŸ’¡ ì˜¤ëŠ˜ì˜ ì‹œì¥ ìš”ì•½</h2>
            <p id="summary" class="text-gray-300 leading-relaxed"></p>
        </section>

        <section class="card">
            <h2 class="text-xl font-bold mb-4 text-purple-300">ğŸŒ ì˜í–¥ë ¥ì´ í° ë‰´ìŠ¤ (Global)</h2>
            <ul id="news-list" class="list-disc list-inside space-y-2 text-sm text-gray-400"></ul>
        </section>

        <section class="card border-l-4 border-yellow-500">
            <h2 class="text-xl font-bold mb-2 text-yellow-300">ğŸš€ AI ì¶”ì²œ ì¢…ëª©</h2>
            <div id="ticker-list" class="flex gap-4 mb-4"></div>
            <p id="reason" class="text-sm text-gray-400 italic"></p>
        </section>

        <section class="card border-l-4 border-green-500">
            <h2 class="text-xl font-bold mb-2 text-green-300">ğŸ¯ ì˜ˆì¸¡ ì •í•©ì„± (ì–´ì œ ì¶”ì²œ ê²°ê³¼)</h2>
            <div id="accuracy-list" class="space-y-2"></div>
        </section>
    </div>

    <script>
        async function loadData() {
            const res = await fetch('recommendations.json?t=' + Date.now());
            const data = await res.json();
            
            document.getElementById('update-date').innerText = "ìµœê·¼ ì—…ë°ì´íŠ¸: " + data.date;
            document.getElementById('summary').innerText = data.summary;
            document.getElementById('reason').innerText = "ì´ìœ : " + data.reason;

            // ì§€ìˆ˜ ë Œë”ë§
            const grid = document.getElementById('market-grid');
            grid.innerHTML = Object.entries(data.market_info).map(([name, info]) => `
                <div class="card p-3 text-center">
                    <div class="text-xs text-gray-400">${name} ${info.status}</div>
                    <div class="text-lg font-bold">${info.price}</div>
                    <div class="${info.change >= 0 ? 'text-red-400' : 'text-blue-400'} text-sm">${info.change}%</div>
                </div>
            `).join('');

            // ë‰´ìŠ¤ ë Œë”ë§
            document.getElementById('news-list').innerHTML = data.news_headlines.map(h => `<li>${h}</li>`).join('');

            // í‹°ì»¤ ë Œë”ë§ (ê· í˜• ì¡íŒ ì¹´ë“œ ìŠ¤íƒ€ì¼)
            document.getElementById('ticker-list').innerHTML = data.tickers.map(t => `
                <div class="flex-1 min-w-[80px] aspect-square flex flex-col items-center justify-center bg-gray-700/50 border border-yellow-600/50 rounded-2xl p-2 text-center shadow-inner">
                    <span class="text-yellow-400 font-bold text-sm md:text-base break-words w-full">
                        ${t}
                    </span>
                </div>
            `).join('');
           
            // ì •í•©ì„± ë Œë”ë§
            document.getElementById('accuracy-list').innerHTML = data.past_results.length > 0 
                ? data.past_results.map(r => `
                    <div class="flex justify-between border-b border-gray-700 py-2">
                        <span>${r.ticker}</span>
                        <span class="${r.change >= 0 ? 'text-red-400' : 'text-blue-400'} font-mono">${r.change}%</span>
                    </div>`).join('')
                : "<p class='text-gray-500'>ê¸°ë¡ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
        }
        loadData();
    </script>
</body>
</html>
